<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>A.4 Cap. 6: Manejo de datos con tidyverse | Introducción a R para Ciencias</title>
  <meta name="description" content="Libro introductorio al uso del lenguaje de programación R, con ejemplos orientados a ciencias" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="A.4 Cap. 6: Manejo de datos con tidyverse | Introducción a R para Ciencias" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://github.com/irwingss/intro_r_ciencias//Cover/cover R.png" />
  <meta property="og:description" content="Libro introductorio al uso del lenguaje de programación R, con ejemplos orientados a ciencias" />
  <meta name="github-repo" content="irwingss/intro_r_ciencias/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A.4 Cap. 6: Manejo de datos con tidyverse | Introducción a R para Ciencias" />
  
  <meta name="twitter:description" content="Libro introductorio al uso del lenguaje de programación R, con ejemplos orientados a ciencias" />
  <meta name="twitter:image" content="https://github.com/irwingss/intro_r_ciencias//Cover/cover R.png" />

<meta name="author" content="Irwing S. Saldaña" />


<meta name="date" content="2022-03-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="figs/favicon.ico" type="image/x-icon" />
<link rel="prev" href="cap.-5-programación-funcional.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style/book.css" type="text/css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class='before'><a href="./">Introducción a R para Ciencias</a></li>

<li class="divider"></li>
<li><a href="index.html#bienvenida"><strong>Bienvenida</strong><span></span></a>
<ul>
<li><a href="cómo-usar-el-libro.html#cómo-usar-el-libro">¿Cómo usar el libro?<span></span></a></li>
</ul></li>
<li><a href="prefacio.html#prefacio"><strong>Prefacio</strong><span></span></a>
<ul>
<li><a href="por-qué-aprender-r.html#por-qué-aprender-r">¿Por qué aprender R?<span></span></a></li>
<li><a href="a-quién-está-dirigido-este-libro.html#a-quién-está-dirigido-este-libro">¿A quién está dirigido este libro?<span></span></a></li>
<li><a href="agradecimientos.html#agradecimientos">Agradecimientos<span></span></a></li>
</ul></li>
<li class="part"><span><b>INTRODUCCIÓN A <br>R PARA CIENCIAS </br><span></span></b></span></li>
<li class="chapter" data-level="1" data-path="esencialesRRStudio.html"><a href="esencialesRRStudio.html"><i class="fa fa-check"></i><b>1</b> <strong>Esenciales de R y RStudio</strong><span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="instalación-de-r-y-rstudio.html"><a href="instalación-de-r-y-rstudio.html"><i class="fa fa-check"></i><b>1.1</b> Instalación de R y RStudio<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="configuración-de-rstudio.html"><a href="configuración-de-rstudio.html"><i class="fa fa-check"></i><b>1.2</b> Configuración de RStudio<span></span></a></li>
<li class="chapter" data-level="1.3" data-path="nuevas-características-de-rstudio-versión-2022-actualizado-23-02-22.html"><a href="nuevas-características-de-rstudio-versión-2022-actualizado-23-02-22.html"><i class="fa fa-check"></i><b>1.3</b> Nuevas características de RStudio versión 2022 (Actualizado: 23-02-22)<span></span></a></li>
<li class="chapter" data-level="1.4" data-path="tema-brackinstitute-2022.html"><a href="tema-brackinstitute-2022.html"><i class="fa fa-check"></i><b>1.4</b> Tema BrackInstitute (2022)<span></span></a></li>
<li class="chapter" data-level="1.5" data-path="panelesRStudio.html"><a href="panelesRStudio.html"><i class="fa fa-check"></i><b>1.5</b> Paneles de RStudio<span></span></a></li>
<li class="chapter" data-level="1.6" data-path="librerías-y-repositorios.html"><a href="librerías-y-repositorios.html"><i class="fa fa-check"></i><b>1.6</b> Librerías y Repositorios<span></span></a></li>
<li class="chapter" data-level="1.7" data-path="actualización-de-librerías.html"><a href="actualización-de-librerías.html"><i class="fa fa-check"></i><b>1.7</b> Actualización de librerías<span></span></a></li>
<li class="chapter" data-level="1.8" data-path="tipos-de-documentos-en-rstudio.html"><a href="tipos-de-documentos-en-rstudio.html"><i class="fa fa-check"></i><b>1.8</b> Tipos de documentos en RStudio<span></span></a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="tipos-de-documentos-en-rstudio.html"><a href="tipos-de-documentos-en-rstudio.html#r-script-.r"><i class="fa fa-check"></i><b>1.8.1</b> R Script (.R)<span></span></a></li>
<li class="chapter" data-level="1.8.2" data-path="tipos-de-documentos-en-rstudio.html"><a href="tipos-de-documentos-en-rstudio.html#r-markdown-.rmd"><i class="fa fa-check"></i><b>1.8.2</b> R Markdown (.Rmd)<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="proyectos-de-rstudio.html"><a href="proyectos-de-rstudio.html"><i class="fa fa-check"></i><b>1.9</b> Proyectos de RStudio<span></span></a></li>
<li class="chapter" data-level="1.10" data-path="pedir-ayuda.html"><a href="pedir-ayuda.html"><i class="fa fa-check"></i><b>1.10</b> Pedir ayuda<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rbasico.html"><a href="rbasico.html"><i class="fa fa-check"></i><b>2</b> <strong>Primer contacto con R</strong><span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="ejecutar-código.html"><a href="ejecutar-código.html"><i class="fa fa-check"></i><b>2.1</b> Ejecutar código<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="r-como-calculadora.html"><a href="r-como-calculadora.html"><i class="fa fa-check"></i><b>2.2</b> R como calculadora<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-como-calculadora.html"><a href="r-como-calculadora.html#funciones-matemáticas"><i class="fa fa-check"></i><b>2.2.1</b> Funciones matemáticas<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="operadores-lógicos-y-relacionales.html"><a href="operadores-lógicos-y-relacionales.html"><i class="fa fa-check"></i><b>2.3</b> Operadores lógicos y relacionales<span></span></a></li>
<li class="chapter" data-level="2.4" data-path="comentar-el-código.html"><a href="comentar-el-código.html"><i class="fa fa-check"></i><b>2.4</b> Comentar el código<span></span></a></li>
<li class="chapter" data-level="2.5" data-path="creación-de-variables.html"><a href="creación-de-variables.html"><i class="fa fa-check"></i><b>2.5</b> Creación de variables<span></span></a></li>
<li class="chapter" data-level="2.6" data-path="funciones.html"><a href="funciones.html"><i class="fa fa-check"></i><b>2.6</b> Funciones<span></span></a></li>
<li class="chapter" data-level="2.7" data-path="funciones-básica-útiles.html"><a href="funciones-básica-útiles.html"><i class="fa fa-check"></i><b>2.7</b> Funciones básica útiles<span></span></a></li>
<li class="chapter" data-level="2.8" data-path="ejercicios-del-capítulo.html"><a href="ejercicios-del-capítulo.html"><i class="fa fa-check"></i><b>2.8</b> Ejercicios del capítulo<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="estructurasdatos.html"><a href="estructurasdatos.html"><i class="fa fa-check"></i><b>3</b> <strong>Estructuras de datos</strong><span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="clasificación-de-variables.html"><a href="clasificación-de-variables.html"><i class="fa fa-check"></i><b>3.1</b> Clasificación de variables<span></span></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="clasificación-de-variables.html"><a href="clasificación-de-variables.html#clases-atómicas"><i class="fa fa-check"></i><b>3.1.1</b> Clases atómicas<span></span></a></li>
<li class="chapter" data-level="3.1.2" data-path="clasificación-de-variables.html"><a href="clasificación-de-variables.html#estructuras-de-datos"><i class="fa fa-check"></i><b>3.1.2</b> Estructuras de datos<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vectores.html"><a href="vectores.html"><i class="fa fa-check"></i><b>3.2</b> Vectores<span></span></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="vectores.html"><a href="vectores.html#crear-un-vector"><i class="fa fa-check"></i><b>3.2.1</b> Crear un vector<span></span></a></li>
<li class="chapter" data-level="3.2.2" data-path="vectores.html"><a href="vectores.html#vectores-de-secuencias-y-repeticiones"><i class="fa fa-check"></i><b>3.2.2</b> Vectores de secuencias y repeticiones<span></span></a></li>
<li class="chapter" data-level="3.2.3" data-path="vectores.html"><a href="vectores.html#funciones-útiles-para-vectores"><i class="fa fa-check"></i><b>3.2.3</b> Funciones útiles para vectores<span></span></a></li>
<li class="chapter" data-level="3.2.4" data-path="vectores.html"><a href="vectores.html#operaciones-numéricas-con-vectores"><i class="fa fa-check"></i><b>3.2.4</b> Operaciones numéricas con vectores<span></span></a></li>
<li class="chapter" data-level="3.2.5" data-path="vectores.html"><a href="vectores.html#valores-perdidos-en-vectores"><i class="fa fa-check"></i><b>3.2.5</b> Valores perdidos en vectores<span></span></a></li>
<li class="chapter" data-level="3.2.6" data-path="vectores.html"><a href="vectores.html#indexación-de-vectores"><i class="fa fa-check"></i><b>3.2.6</b> Indexación de vectores<span></span></a></li>
<li class="chapter" data-level="3.2.7" data-path="vectores.html"><a href="vectores.html#muestreo-de-vectores"><i class="fa fa-check"></i><b>3.2.7</b> Muestreo de vectores<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="factores.html"><a href="factores.html"><i class="fa fa-check"></i><b>3.3</b> Factores<span></span></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="factores.html"><a href="factores.html#crear-un-factor"><i class="fa fa-check"></i><b>3.3.1</b> Crear un factor<span></span></a></li>
<li class="chapter" data-level="3.3.2" data-path="factores.html"><a href="factores.html#niveles-de-un-factor"><i class="fa fa-check"></i><b>3.3.2</b> Niveles de un factor<span></span></a></li>
<li class="chapter" data-level="3.3.3" data-path="factores.html"><a href="factores.html#reordenar-los-niveles"><i class="fa fa-check"></i><b>3.3.3</b> Reordenar los niveles<span></span></a></li>
<li class="chapter" data-level="3.3.4" data-path="factores.html"><a href="factores.html#etiquetas-de-un-factor"><i class="fa fa-check"></i><b>3.3.4</b> Etiquetas de un factor<span></span></a></li>
<li class="chapter" data-level="3.3.5" data-path="factores.html"><a href="factores.html#valores-perdidos-en-un-factor"><i class="fa fa-check"></i><b>3.3.5</b> Valores perdidos en un factor<span></span></a></li>
<li class="chapter" data-level="3.3.6" data-path="factores.html"><a href="factores.html#indexación-de-factores"><i class="fa fa-check"></i><b>3.3.6</b> Indexación de factores<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="matrices.html"><a href="matrices.html"><i class="fa fa-check"></i><b>3.4</b> Matrices<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>3.5</b> Data Frames<span></span></a></li>
<li class="chapter" data-level="3.6" data-path="tibbles.html"><a href="tibbles.html"><i class="fa fa-check"></i><b>3.6</b> Tibbles<span></span></a></li>
<li class="chapter" data-level="3.7" data-path="listas.html"><a href="listas.html"><i class="fa fa-check"></i><b>3.7</b> Listas<span></span></a></li>
<li class="chapter" data-level="3.8" data-path="coerción-de-variables.html"><a href="coerción-de-variables.html"><i class="fa fa-check"></i><b>3.8</b> Coerción de variables<span></span></a></li>
<li class="chapter" data-level="3.9" data-path="ejercicios-del-capítulo-1.html"><a href="ejercicios-del-capítulo-1.html"><i class="fa fa-check"></i><b>3.9</b> Ejercicios del capítulo<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="carga-y-exportación-de-datos.html"><a href="carga-y-exportación-de-datos.html"><i class="fa fa-check"></i><b>4</b> <strong>Carga y exportación de datos</strong><span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="lectura-de-bases-de-datos.html"><a href="lectura-de-bases-de-datos.html"><i class="fa fa-check"></i><b>4.1</b> Lectura de bases de datos<span></span></a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="lectura-de-bases-de-datos.html"><a href="lectura-de-bases-de-datos.html#archivos-delimitados"><i class="fa fa-check"></i><b>4.1.1</b> Archivos delimitados<span></span></a></li>
<li class="chapter" data-level="4.1.2" data-path="lectura-de-bases-de-datos.html"><a href="lectura-de-bases-de-datos.html#archivos-tabulados"><i class="fa fa-check"></i><b>4.1.2</b> Archivos tabulados<span></span></a></li>
<li class="chapter" data-level="4.1.3" data-path="lectura-de-bases-de-datos.html"><a href="lectura-de-bases-de-datos.html#archivos-delimitados-con-otros-caracteres"><i class="fa fa-check"></i><b>4.1.3</b> Archivos delimitados con otros caracteres<span></span></a></li>
<li class="chapter" data-level="4.1.4" data-path="lectura-de-bases-de-datos.html"><a href="lectura-de-bases-de-datos.html#hojas-de-cálculo-de-excel"><i class="fa fa-check"></i><b>4.1.4</b> Hojas de cálculo de Excel<span></span></a></li>
<li class="chapter" data-level="4.1.5" data-path="lectura-de-bases-de-datos.html"><a href="lectura-de-bases-de-datos.html#bases-de-datos-de-r"><i class="fa fa-check"></i><b>4.1.5</b> Bases de datos de R<span></span></a></li>
<li class="chapter" data-level="4.1.6" data-path="lectura-de-bases-de-datos.html"><a href="lectura-de-bases-de-datos.html#archivos-de-spss"><i class="fa fa-check"></i><b>4.1.6</b> Archivos de SPSS<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="exportar-basas-de-datos.html"><a href="exportar-basas-de-datos.html"><i class="fa fa-check"></i><b>4.2</b> Exportar basas de datos<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="programación-funcional.html"><a href="programación-funcional.html"><i class="fa fa-check"></i><b>5</b> <strong>Programación funcional</strong><span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="creacion-fun.html"><a href="creacion-fun.html"><i class="fa fa-check"></i><b>5.1</b> Creación de funciones<span></span></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="creacion-fun.html"><a href="creacion-fun.html#ejemplo-simple"><i class="fa fa-check"></i><b>5.1.1</b> Ejemplo simple<span></span></a></li>
<li class="chapter" data-level="5.1.2" data-path="creacion-fun.html"><a href="creacion-fun.html#función-de-gauss"><i class="fa fa-check"></i><b>5.1.2</b> Función de Gauss<span></span></a></li>
<li class="chapter" data-level="5.1.3" data-path="creacion-fun.html"><a href="creacion-fun.html#variables-y-valores-por-defecto"><i class="fa fa-check"></i><b>5.1.3</b> Variables y valores por defecto<span></span></a></li>
<li class="chapter" data-level="5.1.4" data-path="creacion-fun.html"><a href="creacion-fun.html#almacenar-variables-directamente-en-el-ambiente"><i class="fa fa-check"></i><b>5.1.4</b> Almacenar variables directamente en el ambiente<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="control-de-flujo.html"><a href="control-de-flujo.html"><i class="fa fa-check"></i><b>5.2</b> Control de flujo<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="control-de-flujo.html"><a href="control-de-flujo.html#control-con-if"><i class="fa fa-check"></i><b>5.2.1</b> Control con <code>if</code><span></span></a></li>
<li class="chapter" data-level="5.2.2" data-path="control-de-flujo.html"><a href="control-de-flujo.html#control-completo-con-if-y-else"><i class="fa fa-check"></i><b>5.2.2</b> Control completo con <code>if</code> y <code>else</code><span></span></a></li>
<li class="chapter" data-level="5.2.3" data-path="control-de-flujo.html"><a href="control-de-flujo.html#condicionales-en-vectores-de-más-de-un-elemento-con-ifelse"><i class="fa fa-check"></i><b>5.2.3</b> Condicionales en vectores de más de un elemento con <code>ifelse()</code><span></span></a></li>
<li class="chapter" data-level="5.2.4" data-path="control-de-flujo.html"><a href="control-de-flujo.html#condicionales-en-vectores-case_when-de-dplyr"><i class="fa fa-check"></i><b>5.2.4</b> Condicionales en vectores <code>case_when()</code> de <strong>dplyr</strong><span></span></a></li>
<li class="chapter" data-level="5.2.5" data-path="control-de-flujo.html"><a href="control-de-flujo.html#ciclos-o-loops-con-for"><i class="fa fa-check"></i><b>5.2.5</b> Ciclos o Loops con <code>for</code><span></span></a></li>
<li class="chapter" data-level="5.2.6" data-path="control-de-flujo.html"><a href="control-de-flujo.html#ciclos-o-loops-con-replicate"><i class="fa fa-check"></i><b>5.2.6</b> Ciclos o loops con <code>replicate()</code><span></span></a></li>
<li class="chapter" data-level="5.2.7" data-path="control-de-flujo.html"><a href="control-de-flujo.html#ciclos-o-loops-con-while"><i class="fa fa-check"></i><b>5.2.7</b> Ciclos o Loops con <code>while</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="operadoresfuncion.html"><a href="operadoresfuncion.html"><i class="fa fa-check"></i><b>5.3</b> Operadores de función<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="familia-apply.html"><a href="familia-apply.html"><i class="fa fa-check"></i><b>5.4</b> Familia <code>apply()</code><span></span></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="familia-apply.html"><a href="familia-apply.html#función-apply"><i class="fa fa-check"></i><b>5.4.1</b> Función <code>apply()</code><span></span></a></li>
<li class="chapter" data-level="5.4.2" data-path="familia-apply.html"><a href="familia-apply.html#función-lapply"><i class="fa fa-check"></i><b>5.4.2</b> Función <code>lapply()</code><span></span></a></li>
<li class="chapter" data-level="5.4.3" data-path="familia-apply.html"><a href="familia-apply.html#función-tapply"><i class="fa fa-check"></i><b>5.4.3</b> Función <code>tapply()</code><span></span></a></li>
<li class="chapter" data-level="5.4.4" data-path="familia-apply.html"><a href="familia-apply.html#función-sapply"><i class="fa fa-check"></i><b>5.4.4</b> Función <code>sapply()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="ejercicios-del-capítulo-2.html"><a href="ejercicios-del-capítulo-2.html"><i class="fa fa-check"></i><b>5.5</b> Ejercicios del capítulo<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidyversecap.html"><a href="tidyversecap.html"><i class="fa fa-check"></i><b>6</b> <strong>Manejo de datos con</strong> <strong>tidyverse</strong><span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="datosordenados.html"><a href="datosordenados.html"><i class="fa fa-check"></i><b>6.1</b> Datos ordenados (tidy)<span></span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="datosordenados.html"><a href="datosordenados.html#qué-evitar-para-tener-datos-tidy"><i class="fa fa-check"></i><b>6.1.1</b> ¿Qué evitar para tener datos tidy?<span></span></a></li>
<li class="chapter" data-level="6.1.2" data-path="datosordenados.html"><a href="datosordenados.html#cómo-se-debe-ver-una-base-tidy"><i class="fa fa-check"></i><b>6.1.2</b> ¿Cómo se debe ver una base tidy?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="introducción-a-dplyr-y-tidyr.html"><a href="introducción-a-dplyr-y-tidyr.html"><i class="fa fa-check"></i><b>6.2</b> Introducción a <code>dplyr</code> y <code>tidyr</code><span></span></a></li>
<li class="chapter" data-level="6.3" data-path="pipelines-con-tidyverse.html"><a href="pipelines-con-tidyverse.html"><i class="fa fa-check"></i><b>6.3</b> Pipelines con tidyverse<span></span></a></li>
<li class="chapter" data-level="6.4" data-path="tablas-anchas-y-largas-con-tidyr.html"><a href="tablas-anchas-y-largas-con-tidyr.html"><i class="fa fa-check"></i><b>6.4</b> Tablas anchas y largas con tidyr<span></span></a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="tablas-anchas-y-largas-con-tidyr.html"><a href="tablas-anchas-y-largas-con-tidyr.html#de-ancha-a-larga"><i class="fa fa-check"></i><b>6.4.1</b> De ancha a larga<span></span></a></li>
<li class="chapter" data-level="6.4.2" data-path="tablas-anchas-y-largas-con-tidyr.html"><a href="tablas-anchas-y-largas-con-tidyr.html#de-larga-a-ancha"><i class="fa fa-check"></i><b>6.4.2</b> De larga a ancha<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="filtrado.html"><a href="filtrado.html"><i class="fa fa-check"></i><b>6.5</b> Filtrado<span></span></a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="filtrado.html"><a href="filtrado.html#procedimiento-de-filtrado"><i class="fa fa-check"></i><b>6.5.1</b> Procedimiento de filtrado<span></span></a></li>
<li class="chapter" data-level="6.5.2" data-path="filtrado.html"><a href="filtrado.html#aplicaciones-de-filtrado"><i class="fa fa-check"></i><b>6.5.2</b> Aplicaciones de filtrado<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="selección.html"><a href="selección.html"><i class="fa fa-check"></i><b>6.6</b> Selección<span></span></a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="selección.html"><a href="selección.html#seleccionar-con-funciones-especiales"><i class="fa fa-check"></i><b>6.6.1</b> Seleccionar con funciones especiales<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="agrupamiento.html"><a href="agrupamiento.html"><i class="fa fa-check"></i><b>6.7</b> Agrupamiento<span></span></a></li>
<li class="chapter" data-level="6.8" data-path="conteo.html"><a href="conteo.html"><i class="fa fa-check"></i><b>6.8</b> Conteo<span></span></a></li>
<li class="chapter" data-level="6.9" data-path="resúmenes-estadísticos.html"><a href="resúmenes-estadísticos.html"><i class="fa fa-check"></i><b>6.9</b> Resúmenes estadísticos<span></span></a>
<ul>
<li class="chapter" data-level="6.9.1" data-path="resúmenes-estadísticos.html"><a href="resúmenes-estadísticos.html#otras-funciones-de-la-familia-summarise"><i class="fa fa-check"></i><b>6.9.1</b> Otras funciones de la familia <code>summarise()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="reordenamiento.html"><a href="reordenamiento.html"><i class="fa fa-check"></i><b>6.10</b> Reordenamiento<span></span></a></li>
<li class="chapter" data-level="6.11" data-path="creación-y-transformación-de-columnas.html"><a href="creación-y-transformación-de-columnas.html"><i class="fa fa-check"></i><b>6.11</b> Creación y transformación de columnas<span></span></a></li>
<li class="chapter" data-level="6.12" data-path="combinar-bases-de-datos.html"><a href="combinar-bases-de-datos.html"><i class="fa fa-check"></i><b>6.12</b> Combinar bases de datos<span></span></a>
<ul>
<li class="chapter" data-level="6.12.1" data-path="combinar-bases-de-datos.html"><a href="combinar-bases-de-datos.html#full_join"><i class="fa fa-check"></i><b>6.12.1</b> <code>full_join()</code><span></span></a></li>
<li class="chapter" data-level="6.12.2" data-path="combinar-bases-de-datos.html"><a href="combinar-bases-de-datos.html#left_join"><i class="fa fa-check"></i><b>6.12.2</b> <code>left_join()</code><span></span></a></li>
<li class="chapter" data-level="6.12.3" data-path="combinar-bases-de-datos.html"><a href="combinar-bases-de-datos.html#right_join"><i class="fa fa-check"></i><b>6.12.3</b> <code>right_join()</code><span></span></a></li>
<li class="chapter" data-level="6.12.4" data-path="combinar-bases-de-datos.html"><a href="combinar-bases-de-datos.html#inner_join"><i class="fa fa-check"></i><b>6.12.4</b> <code>inner_join()</code><span></span></a></li>
<li class="chapter" data-level="6.12.5" data-path="combinar-bases-de-datos.html"><a href="combinar-bases-de-datos.html#semi_join"><i class="fa fa-check"></i><b>6.12.5</b> <code>semi_join()</code><span></span></a></li>
<li class="chapter" data-level="6.12.6" data-path="combinar-bases-de-datos.html"><a href="combinar-bases-de-datos.html#anti_join"><i class="fa fa-check"></i><b>6.12.6</b> <code>anti_join()</code><span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.13" data-path="limpieza-de-datos.html"><a href="limpieza-de-datos.html"><i class="fa fa-check"></i><b>6.13</b> Limpieza de datos<span></span></a>
<ul>
<li class="chapter" data-level="6.13.1" data-path="limpieza-de-datos.html"><a href="limpieza-de-datos.html#cuántos-na-existen-en-la-base-de-datos"><i class="fa fa-check"></i><b>6.13.1</b> ¿Cuántos NA existen en la base de datos?<span></span></a></li>
<li class="chapter" data-level="6.13.2" data-path="limpieza-de-datos.html"><a href="limpieza-de-datos.html#cuántos-na-existen-en-cada-columna"><i class="fa fa-check"></i><b>6.13.2</b> ¿Cuántos NA existen en cada columna?<span></span></a></li>
<li class="chapter" data-level="6.13.3" data-path="limpieza-de-datos.html"><a href="limpieza-de-datos.html#en-qué-fila-o-columna-están-los-na"><i class="fa fa-check"></i><b>6.13.3</b> ¿En qué fila o columna están los NA?<span></span></a></li>
<li class="chapter" data-level="6.13.4" data-path="limpieza-de-datos.html"><a href="limpieza-de-datos.html#cómo-reemplazar-los-na-por-otro-valor"><i class="fa fa-check"></i><b>6.13.4</b> ¿Cómo reemplazar los NA por otro valor?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.14" data-path="ejercicios-del-capítulo-3.html"><a href="ejercicios-del-capítulo-3.html"><i class="fa fa-check"></i><b>6.14</b> Ejercicios del capítulo<span></span></a></li>
</ul></li>
<li class="appendix"><span><b>APÉNDICES<span></span></b></span></li>
<li class="chapter" data-level="A" data-path="solucionario-de-ejercicios.html"><a href="solucionario-de-ejercicios.html"><i class="fa fa-check"></i><b>A</b> <strong>Solucionario de ejercicios</strong><span></span></a>
<ul>
<li class="chapter" data-level="A.1" data-path="cap.-2-primer-contacto-con-r.html"><a href="cap.-2-primer-contacto-con-r.html"><i class="fa fa-check"></i><b>A.1</b> Cap. 2: Primer contacto con R<span></span></a></li>
<li class="chapter" data-level="A.2" data-path="preg-estructurasdatos.html"><a href="preg-estructurasdatos.html"><i class="fa fa-check"></i><b>A.2</b> Cap. 3: Estructuras de datos<span></span></a></li>
<li class="chapter" data-level="A.3" data-path="cap.-5-programación-funcional.html"><a href="cap.-5-programación-funcional.html"><i class="fa fa-check"></i><b>A.3</b> Cap. 5: Programación funcional<span></span></a></li>
<li class="chapter" data-level="A.4" data-path="cap.-6-manejo-de-datos-con-tidyverse.html"><a href="cap.-6-manejo-de-datos-con-tidyverse.html"><i class="fa fa-check"></i><b>A.4</b> Cap. 6: Manejo de datos con tidyverse<span></span></a></li>
</ul></li>
<li class="divider"></li>
<li class='after'">
  <center>
   <a href="https://github.com/irwingss/">
      <img src="figs/banner completo.png" style="width:100%; padding:0px 0; display:block; margin: 0 auto;" alt="MC logo">
   </center>
   </a>
</li>
<li class='after'">
   <div style='text-align:center'>
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
         <i class="fab fa-creative-commons fa-lg"></i>
         <i class="fab fa-creative-commons-by fa-lg"></i>
         <i class="fab fa-creative-commons-sa fa-lg"></i>
      </a>
   </div>
</li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción a R para Ciencias</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cap.-6-manejo-de-datos-con-tidyverse" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">A.4</span> Cap. 6: Manejo de datos con tidyverse<a href="cap.-6-manejo-de-datos-con-tidyverse.html#cap.-6-manejo-de-datos-con-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="question">
<ol style="list-style-type: decimal">
<li>Carga la base de datos <code>aids</code> de la librería <strong>boot</strong>. Se pretenden obtener el promedio de las columnas <code>delay</code>, <code>dud</code>, <code>time</code> e<code>y</code>, por cuarto (<code>quarter</code>) y por año (<code>year</code>). Asegúrate de que la tabla esté reordenada de menor a mayor por año (<code>year</code>) y por cuarto (<code>quarter</code>).</li>
</ol>
<p><strong>Solución:</strong></p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(boot)</span>
<span id="cb234-2"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;aids&quot;</span>)</span>
<span id="cb234-3"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-4"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-4" aria-hidden="true" tabindex="-1"></a><span class="do">### Resultado</span></span>
<span id="cb234-5"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-5" aria-hidden="true" tabindex="-1"></a>aids <span class="sc">%&gt;%</span> </span>
<span id="cb234-6"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, quarter) <span class="sc">%&gt;%</span> </span>
<span id="cb234-7"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_at</span>(<span class="at">.vars =</span> <span class="fu">vars</span>(delay, dud, time, y),</span>
<span id="cb234-8"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">.funs =</span> <span class="fu">lst</span>(mean), <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb234-9"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, quarter)</span>
<span id="cb234-10"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-10" aria-hidden="true" tabindex="-1"></a><span class="co"># # A tibble: 38 x 6</span></span>
<span id="cb234-11"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-11" aria-hidden="true" tabindex="-1"></a><span class="co"># # Groups:   year [10]</span></span>
<span id="cb234-12"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-12" aria-hidden="true" tabindex="-1"></a><span class="co">#    year quarter delay_mean dud_mean time_mean y_mean</span></span>
<span id="cb234-13"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb234-14"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 1  1983       3       20.1        0         1  0.8  </span></span>
<span id="cb234-15"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-15" aria-hidden="true" tabindex="-1"></a><span class="co"># 2  1983       4       20.1        0         2  0.8  </span></span>
<span id="cb234-16"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 3  1984       1       20.1        0         3  0.933</span></span>
<span id="cb234-17"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-17" aria-hidden="true" tabindex="-1"></a><span class="co"># 4  1984       2       20.1        0         4  1    </span></span>
<span id="cb234-18"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 5  1984       3       20.1        0         5  2    </span></span>
<span id="cb234-19"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-19" aria-hidden="true" tabindex="-1"></a><span class="co"># 6  1984       4       20.1        0         6  2.6  </span></span>
<span id="cb234-20"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb234-20" aria-hidden="true" tabindex="-1"></a><span class="co"># # ... with 32 more rows</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Utilizando la base de dato <code>aids</code>, encuentra cuales son los años (o el año) en que se tuvieron valores mayores igual a 30 en <code>time</code> y valores de mayores a 25 en <code>delay</code>.</li>
</ol>
<p><strong>Solución:</strong></p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(boot)</span>
<span id="cb235-2"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb235-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;aids&quot;</span>)</span>
<span id="cb235-3"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb235-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-4"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb235-4" aria-hidden="true" tabindex="-1"></a><span class="do">### Resultado</span></span>
<span id="cb235-5"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb235-5" aria-hidden="true" tabindex="-1"></a>aids <span class="sc">%&gt;%</span> </span>
<span id="cb235-6"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb235-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time <span class="sc">&gt;=</span> <span class="dv">30</span> <span class="sc">&amp;</span> delay <span class="sc">&gt;</span> <span class="dv">25</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb235-7"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb235-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb235-8"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb235-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb235-9"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb235-9" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] 1990 1991 1992</span></span></code></pre></div>
</div>

<div class="rmdnote">
Probablemente llegaste por tu cuenta hasta el uso de <code>filter()</code>. La función <code>pull()</code> extrae una columna como un vector de datos. Es muy útil cuando se desea trabajar con un vector resultante y no con una data frame. La función <code>unique()</code> devuelve los valores únicos de un vector, por ello el resultado impreso es solamente <code>1992</code>.
</div>
<div class="question">
<ol style="list-style-type: decimal">
<li>La función <code>grepl()</code> provee una manera muy interesante de filtrar filas. Permite especificar un texto que será buscado dentro de cada palabra en cada celda de dicha columna, para filtrar las filas que contengan dicha cadena de texto. Pueden ser solo letras consecutivas, una palabras completa, etc. Usando <code>grepl()</code> dentro de la función <code>filter()</code>, se filtrarán las filas que coincidan con la búsqueda hecha por <code>grepl()</code>. Una vez entendido el uso de la función <code>grepl()</code>, instala y activa la librería <code>gapminder</code>, y carga la base de datos del mismo nombre. Filtra las filas que en la columna <code>country</code> tengan el patrón de texto “ru”. Luego, realiza una segunda <em>pipeline</em> para realizar lo mismo pero ahora con el patrón “nia”, indicando que se ignore mayúsculas o minúsculas.</li>
</ol>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Conjunto de datos</span></span>
<span id="cb236-2"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-2" aria-hidden="true" tabindex="-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Andrea&quot;</span>,<span class="st">&quot;Breta&quot;</span>,<span class="st">&quot;Mark&quot;</span>,<span class="st">&quot;Elon&quot;</span>)</span>
<span id="cb236-3"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-4"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-4" aria-hidden="true" tabindex="-1"></a><span class="do">### Buscar la letra A mayúscula en los elementos del vector</span></span>
<span id="cb236-5"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-5" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;A&quot;</span>, vector)</span>
<span id="cb236-6"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-6" aria-hidden="true" tabindex="-1"></a><span class="co"># [1]  TRUE FALSE FALSE FALSE</span></span>
<span id="cb236-7"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-8"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-8" aria-hidden="true" tabindex="-1"></a><span class="do">### Buscar la letra A (mayúscula o minúscula) en los elementos del vector</span></span>
<span id="cb236-9"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-9" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;A&quot;</span>, vector, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)</span>
<span id="cb236-10"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-10" aria-hidden="true" tabindex="-1"></a><span class="co"># [1]  TRUE  TRUE  TRUE FALSE</span></span>
<span id="cb236-11"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-12"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-12" aria-hidden="true" tabindex="-1"></a><span class="do">### Buscar re mayúscula en los elementos del vector</span></span>
<span id="cb236-13"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-13" aria-hidden="true" tabindex="-1"></a><span class="fu">grepl</span>(<span class="st">&quot;re&quot;</span>, vector)</span>
<span id="cb236-14"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb236-14" aria-hidden="true" tabindex="-1"></a><span class="co"># [1]  TRUE  TRUE FALSE FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Inicia el ejercicio con la instalación de gapminder</span></span>
<span id="cb237-2"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;gapminder&quot;</span>)</span>
<span id="cb237-3"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb237-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span></code></pre></div>
<p><strong>Solución:</strong></p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb238-2"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;gapminder&quot;</span>)</span>
<span id="cb238-3"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-4"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Resolución</span></span>
<span id="cb238-5"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-5" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb238-6"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;ru&quot;</span>,country)) <span class="sc">%&gt;%</span> </span>
<span id="cb238-7"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(country) <span class="sc">%&gt;%</span> </span>
<span id="cb238-8"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb238-9"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-9" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] Burundi Peru    Uruguay</span></span>
<span id="cb238-10"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 142 Levels: Afghanistan Albania Algeria Angola Argentina Australia ... Zimbabwe</span></span>
<span id="cb238-11"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-12"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-12" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span> </span>
<span id="cb238-13"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&quot;nia&quot;</span>,country, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb238-14"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(country) <span class="sc">%&gt;%</span> </span>
<span id="cb238-15"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb238-16"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-16" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] Albania                Bosnia and Herzegovina Mauritania            </span></span>
<span id="cb238-17"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-17" aria-hidden="true" tabindex="-1"></a><span class="co"># [4] Romania                Slovenia               Tanzania              </span></span>
<span id="cb238-18"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb238-18" aria-hidden="true" tabindex="-1"></a><span class="co"># 142 Levels: Afghanistan Albania Algeria Angola Argentina Australia ... Zimbabwe</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Carga la base de datos <code>breslow</code> de la librería <strong>boot</strong>. Esta base contiene información sobre el estatus de fumador/no fumador y edad de varios pacientes. Filtra las filas de las personas fumadoras (<code>1</code>) en la columna <code>smoke</code> que tengan <code>age</code> (edad) mayor a 40. Si realizas el ejercicio y no te funciona, la respuesta no era tan sencilla como aparenta. Revisar la <code>str()</code> de una base de datos es crucial siempre, aquí ayuda a entender que originalmente <code>age</code> es un factor, y debería ser numérica para aplicarle el filtrado con mayor a 40. Algo similar pasa con <code>smoke</code>, es numérica y debe ser un factor. Utiliza la función respectiva de <strong>dplyr</strong> para transformar estas columnas. Aquí el truco para <code>age</code> es primero convertirla de factor a character, y luego a numeric. Pasar de factor directamente a numeric puede hacer que se pierda la información. Juega un poco con la base y notarás estos problemas.</li>
</ol>
<p><strong>Solución:</strong></p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(boot)</span>
<span id="cb239-2"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;breslow&quot;</span>)</span>
<span id="cb239-3"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-4"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-4" aria-hidden="true" tabindex="-1"></a><span class="do">### Revisar su estructura</span></span>
<span id="cb239-5"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-5" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(breslow)</span>
<span id="cb239-6"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-6" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;data.frame&#39;: 10 obs. of  5 variables:</span></span>
<span id="cb239-7"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-7" aria-hidden="true" tabindex="-1"></a><span class="co">#  $ age  : Factor w/ 5 levels &quot;40&quot;,&quot;50&quot;,&quot;60&quot;,..: 1 2 3 4 5 1 2 3 4 5</span></span>
<span id="cb239-8"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  $ smoke: num  0 0 0 0 0 1 1 1 1 1</span></span>
<span id="cb239-9"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-9" aria-hidden="true" tabindex="-1"></a><span class="co">#  $ n    : num  18790 10673 5710 2585 1462 ...</span></span>
<span id="cb239-10"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-10" aria-hidden="true" tabindex="-1"></a><span class="co">#  $ y    : num  2 12 28 28 31 32 104 206 186 102</span></span>
<span id="cb239-11"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-11" aria-hidden="true" tabindex="-1"></a><span class="co">#  $ ns   : num  0 0 0 0 0 ...</span></span>
<span id="cb239-12"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-13"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-13" aria-hidden="true" tabindex="-1"></a><span class="do">### Resolver el problema</span></span>
<span id="cb239-14"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-14" aria-hidden="true" tabindex="-1"></a>breslow <span class="sc">%&gt;%</span> </span>
<span id="cb239-15"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">as.character</span>(age),</span>
<span id="cb239-16"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">age =</span> <span class="fu">as.numeric</span>(age),</span>
<span id="cb239-17"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">smoke =</span> <span class="fu">as.factor</span>(smoke)) <span class="sc">%&gt;%</span> </span>
<span id="cb239-18"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(smoke<span class="sc">==</span><span class="st">&quot;1&quot;</span> <span class="sc">&amp;</span> age <span class="sc">&gt;</span> <span class="dv">40</span>) </span>
<span id="cb239-19"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-19" aria-hidden="true" tabindex="-1"></a><span class="co">#    age smoke     n   y    ns</span></span>
<span id="cb239-20"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 7   50     1 43248 104 43248</span></span>
<span id="cb239-21"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-21" aria-hidden="true" tabindex="-1"></a><span class="co"># 8   60     1 28612 206 28612</span></span>
<span id="cb239-22"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-22" aria-hidden="true" tabindex="-1"></a><span class="co"># 9   70     1 12663 186 12663</span></span>
<span id="cb239-23"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb239-23" aria-hidden="true" tabindex="-1"></a><span class="co"># 10  80     1  5317 102  5317</span></span></code></pre></div>
<ol style="list-style-type: decimal">
<li>Carga la base de datos <code>population</code> de la librería <strong>tidyr</strong>. Identifica cuales son los seis países con mayor población (asegúrate de expresarlo en millones) en 1995, y luego en 2007. ¿Cambió algún país en la lista del top 6 ordenada de mayor a menor?</li>
</ol>
<p><strong>Solución:</strong></p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb240-2"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;population&quot;</span>)</span>
<span id="cb240-3"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-4"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-4" aria-hidden="true" tabindex="-1"></a><span class="do">### Resultado para 1995</span></span>
<span id="cb240-5"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-5" aria-hidden="true" tabindex="-1"></a>Tabla_A <span class="ot">&lt;-</span> population <span class="sc">%&gt;%</span> </span>
<span id="cb240-6"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">1995</span>) <span class="sc">%&gt;%</span></span>
<span id="cb240-7"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Millones =</span> population<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb240-8"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(population)) <span class="sc">%&gt;%</span> </span>
<span id="cb240-9"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb240-10"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-11"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-11" aria-hidden="true" tabindex="-1"></a><span class="do">### Resultado para 2007</span></span>
<span id="cb240-12"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-12" aria-hidden="true" tabindex="-1"></a>Tabla_B <span class="ot">&lt;-</span>population <span class="sc">%&gt;%</span> </span>
<span id="cb240-13"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">%&gt;%</span></span>
<span id="cb240-14"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Millones =</span> population<span class="sc">/</span><span class="dv">1000000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb240-15"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(population)) <span class="sc">%&gt;%</span> </span>
<span id="cb240-16"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb240-17"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-18"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-18" aria-hidden="true" tabindex="-1"></a><span class="do">### Utilizando anti_join() para ver las filas</span></span>
<span id="cb240-19"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-19" aria-hidden="true" tabindex="-1"></a><span class="do">### de Tabla_A que no aparecen en Tabla_B</span></span>
<span id="cb240-20"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-20" aria-hidden="true" tabindex="-1"></a><span class="do">### o por decirlo diferente, las filas exclusivas de Tabla_A</span></span>
<span id="cb240-21"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-21" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(Tabla_A, Tabla_B, <span class="at">by=</span><span class="st">&quot;country&quot;</span>)</span>
<span id="cb240-22"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-22" aria-hidden="true" tabindex="-1"></a><span class="co"># # A tibble: 1 x 4</span></span>
<span id="cb240-23"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-23" aria-hidden="true" tabindex="-1"></a><span class="co">#   country             year population Millones</span></span>
<span id="cb240-24"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   &lt;chr&gt;              &lt;int&gt;      &lt;int&gt;    &lt;dbl&gt;</span></span>
<span id="cb240-25"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-25" aria-hidden="true" tabindex="-1"></a><span class="co"># 1 Russian Federation  1995  148602147     149.</span></span>
<span id="cb240-26"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-27"><a href="cap.-6-manejo-de-datos-con-tidyverse.html#cb240-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Respuesta: sí, cambió la Federación Rusa por Pakistán.</span></span></code></pre></div>
</div>

</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="cap.-5-programación-funcional.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/irwingss/intro_r_ciencias/blob/master/09-solucionario.Rmd",
"text": "Editar"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"depth": 2,
"scroll_highlight": true
},
"df_print": "kable"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
